---
phase: 02-infrastructure-setup
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - bot/src/config/chains/arbitrum.ts
  - bot/src/config/chains/arbitrum-sepolia.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Balancer Vault address is 0xBA12222222228d8Ba445958a75a0704d566BF2C8 in both Arbitrum chain configs"
    - "All tests (Solidity + TypeScript) pass after address update"
  artifacts:
    - path: "bot/src/config/chains/arbitrum.ts"
      provides: "Arbitrum mainnet config with real Balancer Vault address"
      contains: "0xBA12222222228d8Ba445958a75a0704d566BF2C8"
    - path: "bot/src/config/chains/arbitrum-sepolia.ts"
      provides: "Arbitrum Sepolia config with real Balancer Vault address"
      contains: "0xBA12222222228d8Ba445958a75a0704d566BF2C8"
  key_links:
    - from: "bot/src/config/chains/arbitrum.ts"
      to: ".env.example.arbitrum-sepolia"
      via: "BALANCER_VAULT address consistency"
      pattern: "0xBA12222222228d8Ba445958a75a0704d566BF2C8"
---

<objective>
Fix Balancer Vault placeholder addresses in Arbitrum chain configs.

Purpose: The verification report found that both `arbitrum.ts` and `arbitrum-sepolia.ts` use `0x0000000000000000000000000000000000000000` as the Balancer Vault address. The real address is `0xBA12222222228d8Ba445958a75a0704d566BF2C8` (same on all EVM chains via CREATE2, confirmed by the existing Sepolia deployment at `deployments/11155111.json` which already uses this address). This placeholder will cause Deploy.s.sol to revert on the `require(chain.balancerVault != address(0))` validation check.

Output: Updated chain config files with correct Balancer Vault address.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan outputs
@.planning/phases/02-infrastructure-setup/02-02-SUMMARY.md

# Files to modify
@bot/src/config/chains/arbitrum.ts
@bot/src/config/chains/arbitrum-sepolia.ts

# Reference: existing Sepolia deployment uses Balancer Vault 0xBA12...2C8
@deployments/11155111.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Balancer Vault placeholder in Arbitrum chain configs</name>
  <files>bot/src/config/chains/arbitrum.ts, bot/src/config/chains/arbitrum-sepolia.ts</files>
  <action>
    Replace the placeholder Balancer Vault address in both files.

    In `bot/src/config/chains/arbitrum.ts`:
    - Change `balancerVault: "0x0000000000000000000000000000000000000000", // TBD - resolve during Phase 3`
    - To `balancerVault: "0xBA12222222228d8Ba445958a75a0704d566BF2C8", // Balancer V2 Vault (same on all chains via CREATE2)`

    In `bot/src/config/chains/arbitrum-sepolia.ts`:
    - Change `balancerVault: "0x0000000000000000000000000000000000000000", // TBD - resolve during Phase 3`
    - To `balancerVault: "0xBA12222222228d8Ba445958a75a0704d566BF2C8", // Balancer V2 Vault (same on all chains via CREATE2)`

    This address is confirmed correct by:
    1. The existing Sepolia deployment (`deployments/11155111.json`) already uses `0xBA12222222228d8Ba445958a75a0704d566BF2C8`
    2. The `.env.example.arbitrum-sepolia` template already uses this address for `BALANCER_VAULT`
    3. Phase 2 Plan 2 SUMMARY documented this as a key decision: "Balancer Vault address confirmed: Used same address 0xBA12... as existing Sepolia deployment. This is a deterministic CREATE2 address used across all EVM chains."
    4. STATE.md records this decision: "Balancer Vault uses same CREATE2 address across chains (0xBA12...2C8)"

    Do NOT change any other values in these files.
  </action>
  <verify>
    1. `grep "0xBA12222222228d8Ba445958a75a0704d566BF2C8" bot/src/config/chains/arbitrum.ts` returns a match
    2. `grep "0xBA12222222228d8Ba445958a75a0704d566BF2C8" bot/src/config/chains/arbitrum-sepolia.ts` returns a match
    3. `grep "0x0000000000000000000000000000000000000000" bot/src/config/chains/arbitrum.ts` returns NO match for balancerVault (note: testnet token addresses in arbitrum-sepolia.ts may still be 0x0000... and that is expected)
    4. `pnpm test` passes (all TypeScript tests)
    5. `forge test` passes (all Solidity tests)
  </verify>
  <done>
    Both Arbitrum chain configs use the real Balancer V2 Vault address (0xBA12222222228d8Ba445958a75a0704d566BF2C8) instead of the zero-address placeholder. All tests pass.
  </done>
</task>

</tasks>

<verification>
1. No placeholder (0x0000...) for balancerVault in either Arbitrum config file
2. Address matches the existing Sepolia deployment and env template
3. All tests pass (both `forge test` and `pnpm test`)
</verification>

<success_criteria>
- Balancer Vault address is `0xBA12222222228d8Ba445958a75a0704d566BF2C8` in `arbitrum.ts` and `arbitrum-sepolia.ts`
- No regressions in test suite
</success_criteria>

<output>
After completion, create `.planning/phases/02-infrastructure-setup/02-03-SUMMARY.md`
</output>
